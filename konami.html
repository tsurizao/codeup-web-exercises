<!DOCTYPE html>
<html>
<head>
    <title>Konami Code</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
</head>
<body style="background-color: black">
<img id="image" src="/img/contra.png" style="margin-left: 1000px; width: 100%; height: 100%">
<div id="setAudio"></div>
<h1>Konami Code</h1>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
        crossorigin="anonymous"></script>
<script>
    "use strict";
    let contraTitle = new Audio("/audio/contra-title.mp3");
    let levelComplete = new Audio("/audio/contra-area-clear.mp3");
    let sob = new Audio("/audio/you-son-of-a-bitch.mp3");
    let goodWork = new Audio("/audio/good-work.mp3");

    let tryAgain = function(){
        let again = confirm("Would you like to try again?");
        if (again) {
            window.location.reload();
        } else {
            window.location.assign("https://www.youtube.com/watch?v=N9-d6H14DKc");
        }
    };

    alert("Once you click the page body, you will have 15 seconds to input the Konami Code.")


    // Image slides into place and audio plays after 2.5 seconds
    let flag = true;
    $("body").on("click", function () {
        if (flag) {
            $("img").animate({
                marginLeft: "0px"
            }, 2500);
            function playTitleSound() {
                contraTitle.play();
            }
            setTimeout(playTitleSound, 2500);
        }

        // Timeout function adds a timer to complete the code
        flag = false;
        let timer = setTimeout(function () {
            let hadEnough = new Audio("/audio/had-enough.mp3");
            hadEnough.play();
            setTimeout(function () {
                tryAgain();
            }, 2000)
        }, 15000)

        // Checks for the Konami Code within the variable userInput
        let userInput = "";
        $(document).on("keyup", function (event) {
            userInput += event.key;
            if (userInput.includes("ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightbaEnter")) {
                $("img").attr("src", "/img/handshake-predator.gif");
                levelComplete.play();
                sob.play();
                // goodWork.play();
                clearTimeout(timer);

                // Alert after a 1 second delay
                function livesAlert() {
                    alert("You have added 30 lives!");
                    tryAgain();
                }
                setTimeout(livesAlert, 2000);

            }
        });
    });
</script>
</body>
</html>